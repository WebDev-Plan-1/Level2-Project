@use "../abstracts/variables" as v;
@use "../abstracts/mixins" as m;
@use "../base/components.scss" as c;

// ===== Categories Section -- Category Page =====
.category-header {
    padding: 4rem 0;
    text-align: center;
    background: v.$light-bg;

    .section-title {
        font-size: 2.5rem;
        margin-bottom: 1rem;
    }

    .section-title-desc {
        font-size: 1.2rem;
        color: v.$secondary-color;
        max-width: 600px;
        margin: 0 auto;
        line-height: 1.5;
        font-family: v.$font-second;
    }

    @media (max-width: v.$breakpoint-watch) {
        padding: v.$spacing-md v.$spacing-xs;

        .section-title {
            font-size: 1.3rem;
        }

        .section-title-desc {
            font-size: 0.8rem;
        }
    }
}

// ================================
// Category Page Cards Styles
// ================================

// ================================
// Category Page Cards Grid
// ================================

.articles-list {
    max-width: 1200px;
    margin: 0 auto;
    padding: v.$spacing-lg v.$spacing-md;
    .posts {
        // Define a reusable column gap as CSS custom property
        --col-gap: 2rem;
        // Use flexbox to allow centering per line
        display: flex;
        // Allow items to wrap to the next line
        flex-wrap: wrap;
        // Set the gap between items horizontally and vertically
        gap: var(--col-gap);
        // Center items on each flex line when there's leftover space
        justify-content: center;

        .post-card {
            flex-grow: 0 1 100%;
            width: 100%;
            max-width: 350px;
            padding: v.$spacing-md;
            background: #fff;
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
            transition:
                transform 0.3s ease,
                box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;

            &:hover {
                transform: translateY(-6px);
                box-shadow: 0 8px 18px rgba(0, 0, 0, 0.12);

                .post__image {
                    transform: scale(1.05);
                }
            }

            .post__image {
                width: 100%;
                height: 220px;
                object-fit: cover;
                transition: transform 0.4s ease;
            }

            .post__title {
                // font-size: 1.1rem;
                font-family: v.$font-second;
                margin: v.$spacing-md 0 v.$spacing-sm 0;
                color: v.$primary-color;
                font-weight: 600;
                @include m.responsive-font(1.1rem, 1.5rem);
                @include m.transition(0.3s);
            }

            .post__description {
                flex-grow: 1;
                overflow: hidden;
                text-overflow: ellipsis;
                // Uncomment the following lines if you want to limit the description to 3 lines
                display: -webkit-box;
                line-clamp: 4;
                -webkit-line-clamp: 4; // Limit to 3 lines
                -webkit-box-orient: vertical;
                font-size: 1rem;
                color: v.$secondary-color;
                margin-bottom: v.$spacing-md;
                @include m.responsive-font(0.9rem, 1.2rem);
                // line-height: 1.4;
            }

            .post-category {
                font-size: 0.9rem;
                font-family: v.$font-second;
                color: darken(v.$primary-color, 20%);
                margin: v.$spacing-xs 0;
                pointer-events: none;
            }

            .post-info {
                font-size: 0.9rem;
                font-family: v.$font-main;
                color: v.$secondary-color;
                margin: v.$spacing-sm 0;
                display: flex;
                justify-content: space-between;
                align-items: center;
                gap: 1rem;
                pointer-events: none;

                .post-views {
                    font-weight: 600;
                    font-family: v.$font-main;
                    @include m.transition(0.3s);
                }

                .post-date {
                    font-style: italic;
                    font-size: 0.85rem;
                    font-family: v.$font-second;
                    color: darken(v.$secondary-color, 20%);
                    @include m.transition(0.3s);
                }
            }
            &:hover {
                .post-info > * {
                    color: v.$primary-color;
                }
            }

            .post__btn {
                @include c.button-primary;
                align-self: center;
                padding: v.$spacing-sm v.$spacing-md;
                text-align: center;
                // display: inline-block;
                margin-top: v.$spacing-md;
                // width: 100%;
                text-decoration: none;
                font-size: 1rem;
                font-family: v.$font-second;
                @include m.responsive-font(0.9rem, 1.2rem);
                @include m.transition(0.3s);

                @media (max-width: v.$breakpoint-watch) {
                    font-size: 0.7rem;
                }
            }
        }
    }
}

.category-controls {
    display: flex;
    justify-content: center; // Center the controls horizontally
    align-items: center;
    gap: 1rem; // Space between filter & sorter
    margin: 2rem 0;

    select {
        padding: 0.6rem 1rem 0.6rem 0.6rem;
        font-size: 1rem;
        font-family: inherit;
        border: 1px solid #ccc;
        border-radius: 0.5rem;
        background: #fff;
        color: v.$primary-color;
        cursor: pointer;
        transition: all 0.3s ease;

        &:hover {
            border-color: v.$primary-color;
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.3);
        }

        &:focus {
            outline: none;
            border-color: v.$primary-color;
            box-shadow: 0 0 8px rgba(0, 123, 255, 0.5);
        }
    }

    // Responsive: stack controls on smaller screens
    @media (max-width: v.$breakpoint-mobile) {
        flex-direction: column;
        gap: 0.8rem;
        width: 100%;
    }
    @media (max-width: v.$breakpoint-watch) {
        select {
            font-size: 0.8rem;
            padding: 0.4rem 0.8rem 0.4rem 0.4rem;
        }
    }
}

// ================================
// Responsive Tweaks
// ================================

// Tablet (max 991px) → 2 cards
@media (max-width: v.$breakpoint-tablet) {
    .articles-list .posts {
        grid-template-columns: repeat(2, 1fr);
        padding: v.$spacing-md v.$spacing-sm;
    }
}

// Mobile (max 600px) → 1 card
@media (max-width: v.$breakpoint-mobile) {
    .articles-list .posts {
        grid-template-columns: 1fr;
        padding: v.$spacing-md v.$spacing-xs;
    }
    .articles-list .post-card .post__image {
        height: 180px;
    }
    .articles-list .post-card .post__title {
        font-size: 1.1rem;
    }
}
